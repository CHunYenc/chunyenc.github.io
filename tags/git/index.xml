<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GIT on CY | 程式小角落</title><link>/tags/git/</link><description>Recent content in GIT on CY | 程式小角落</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><managingEditor>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</managingEditor><webMaster>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</webMaster><lastBuildDate>Fri, 27 Jan 2023 15:53:22 +0800</lastBuildDate><atom:link href="/tags/git/index.xml" rel="self" type="application/rss+xml"/><item><title>教學 01 - 如何讓 render.com 提供的機器不睡眠</title><link>/p/wakup-machine/</link><pubDate>Fri, 27 Jan 2023 15:53:22 +0800</pubDate><author>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</author><guid>/p/wakup-machine/</guid><description>使用 heroku、render.com 等平台的免費機器，基本上都會自動睡眠.</description><tags><tag>GIT</tag><tag>Docker</tag><tag>Heroku</tag><tag>render</tag></tags><categories><category>Experience</category><category>Tutorial</category></categories><image/><content>&lt;h1 id="前言">前言
&lt;/h1>&lt;blockquote>
&lt;p>祝大家新年快樂 !!!&lt;/p>
&lt;/blockquote>
&lt;p>今天是初六，也休息一陣子了，覺得有點廢。&lt;/p>
&lt;p>主要是因為大四時擔任宿舍網路會長時製作的 LINE-BOT 上線在 &lt;code>heroku&lt;/code>，但是 &lt;code>2022/12&lt;/code> 已經公告說他們要開始收錢了。於是我就將 LINE-BOT 的伺服器轉移到 &lt;code>render.com&lt;/code> 平台。&lt;/p>
&lt;p>那在轉移時有製作一個工具。就是要不間斷的去呼叫免費平台(類似 heroku.com、render.com)。&lt;/p>
&lt;blockquote>
&lt;p>就是要讓機器永遠不睡眠 ! 操爆它 (X)&lt;/p>
&lt;/blockquote>
&lt;p>統整做了三件事：&lt;/p>
&lt;ol>
&lt;li>運用 Python 定時呼叫小應用的網址&lt;/li>
&lt;li>利用 Docker 彈性系統參數&lt;/li>
&lt;li>利用 Docker Compose 定時呼叫多個平台&lt;/li>
&lt;/ol>
&lt;p>本篇不是教你怎麼做這個工具，是教你如何用。&lt;/p>
&lt;p>所以會從 &lt;code>2.&lt;/code> 來教你怎麼做 !&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h1 id="利用-docker-來使用工具">利用 Docker 來使用工具
&lt;/h1>&lt;p>&lt;code>工具只需要透過 Docker 就可以執行囉 !&lt;/code>&lt;/p>
&lt;p>範例如下：&lt;code>範例下方還有部分說明唷 !&lt;/code>&lt;/p>
&lt;p>&lt;code>**** 記得要先建立一個 schedule.log 檔案。&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--restart always &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--name wakeup-render &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="nv">URL&lt;/span>&lt;span class="o">=&lt;/span>https://yourwebsite.domain.com/ &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="nv">APSCHEDULER_DAY_OF_WEEK&lt;/span>&lt;span class="o">=&lt;/span>mon-fri &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="nv">APSCHEDULER_MINUTE&lt;/span>&lt;span class="o">=&lt;/span>*/10 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-v /Users/yen/Desktop/schedule.log:/app/scheduler.log &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>chunyenc/wakeup-machine
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>--restart&lt;/code> 若重開機將自動執行&lt;/li>
&lt;li>&lt;code>--name&lt;/code> container 的名稱&lt;/li>
&lt;li>&lt;code>-e&lt;/code> 環境變數
&lt;ul>
&lt;li>URL 是你要呼叫的網址&lt;/li>
&lt;li>APSCHEDULER_DAY_OF_WEEK 一週裡面哪幾天執行&lt;/li>
&lt;li>APSCHEDULER_MINUTE 是多少分鐘呼叫一次&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-v&lt;/code> 映射檔案
&lt;ul>
&lt;li>linux 可以使用 &lt;code>pwd&lt;/code> 指令來查看目前的絕對路徑&lt;/li>
&lt;li>schedule.log 就是查看執行 log 的檔案&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="環境變數列表">環境變數列表
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>環境變數&lt;/th>
&lt;th>範例值&lt;/th>
&lt;th>備註&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>URL&lt;/td>
&lt;td>&lt;a class="link" href="https://chunyen.xyz" target="_blank" rel="noopener"
>https://chunyen.xyz&lt;/a>&lt;/td>
&lt;td>呼叫的網址&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_YEAR&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_MONTH&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_DAY&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_WEEK&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_DAY_OF_WEEK&lt;/td>
&lt;td>mon-fri&lt;/td>
&lt;td>依照範例，設定週一到週五&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_HOUR&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_MINUTE&lt;/td>
&lt;td>*/10&lt;/td>
&lt;td>依照範例，設定每十分鐘&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>APSCHEDULER_SECOND&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>APSCHEDULER 需要參考下面網址來設定
&lt;a class="link" href="https://apscheduler.readthedocs.io/en/3.x/modules/triggers/cron.html" target="_blank" rel="noopener"
>https://apscheduler.readthedocs.io/en/3.x/modules/triggers/cron.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h1 id="如果是使用-docker-compose-">如果是使用 Docker Compose ..
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.9&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">service-one&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">chunyenc/wakeup-machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">URL=https://one.chunyen.xyz&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">APSCHEDULER_MINUTE=*/10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">APSCHEDULER_HOUR=0-1,5-23&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">APSCHEDULER_DAY_OF_WEEK=mon-fri&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./pricing.log:/app/scheduler.log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">service-two&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">chunyenc/wakeup-machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">URL=https://two.chunyen.xyz&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">APSCHEDULER_MINUTE=*/10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">APSCHEDULER_HOUR=9-23&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./linebot.log:/app/scheduler.log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></content></item><item><title>置頂 - 提高效率的必備指令：一份我的常用指令與工具清單</title><link>/p/common-scripts/</link><pubDate>Wed, 18 Jan 2023 11:38:22 +0800</pubDate><author>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</author><guid>/p/common-scripts/</guid><description>工作時常使用到的指令與工具</description><tags><tag>GIT</tag><tag>Docker</tag><tag>VSCode</tag></tags><categories><category>Experience</category></categories><image/><content>&lt;h1 id="前言">前言
&lt;/h1>&lt;p>主要為存放工作中經常使用的指令、框架、套件。&lt;/p>
&lt;p>若有任何建議或是覺得需要修改的地方還請不吝指教，謝謝！&lt;/p>
&lt;p>如何聯繫我 ?&lt;/p>
&lt;blockquote>
&lt;p>可以利用本篇文章下面留言，導航列也有提供我的社群平台 ~&lt;/p>
&lt;/blockquote>
&lt;h1 id="目錄">目錄
&lt;/h1>&lt;p>電腦版右側有目錄，手機版沒有，這邊的目錄為了手機版而整理 !&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="#%e5%89%8d%e8%a8%80" >前言&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#%e7%9b%ae%e9%8c%84" >目錄&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#%e5%a5%97%e4%bb%b6%e6%a1%86%e6%9e%b6%e5%8d%80" >套件框架區&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#vscode" >VSCode&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#markdown" >Markdown&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="#%e5%b8%b8%e7%94%a8%e6%8c%87%e4%bb%a4%e5%8d%80" >常用指令區&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#git" >Git&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#%e4%b8%8b%e8%bc%89%e5%ad%90%e6%a8%a1%e7%b5%84" >下載子模組&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#%e5%88%87%e6%8f%9b%e9%81%a0%e7%ab%af%e5%88%86%e6%94%af" >切換遠端分支&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="#vue" >Vue&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#%e6%9b%b4%e6%94%b9-port" >更改 Port&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="#docker" >Docker&lt;/a>
&lt;ul>
&lt;li>&lt;a class="link" href="#redis" >Redis&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#postgresql" >PostgreSQL&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="套件框架區">套件框架區
&lt;/h1>&lt;h2 id="vscode">VSCode
&lt;/h2>&lt;h3 id="markdown">Markdown
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/yzhang-gh/vscode-markdown" target="_blank" rel="noopener"
>https://github.com/yzhang-gh/vscode-markdown&lt;/a> &lt;code>自動生成 md 目錄&lt;/code>&lt;/li>
&lt;/ul>
&lt;h1 id="常用指令區">常用指令區
&lt;/h1>&lt;h2 id="git">Git
&lt;/h2>&lt;p>Git 是一個分散式版本控制系統，用於追蹤檔案變更並協助多人共同開發專案。&lt;/p>
&lt;h3 id="下載子模組">下載子模組
&lt;/h3>&lt;p>當你使用 git &lt;code>clone&lt;/code> 下載完儲存庫後，發現沒有下載 submodule, 使用下面的指令可以直接把子模組載入。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git submodule update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="切換遠端分支">切換遠端分支
&lt;/h3>&lt;p>&lt;code>待補&lt;/code>&lt;/p>
&lt;h2 id="vue">Vue
&lt;/h2>&lt;h3 id="更改-port">更改 Port
&lt;/h3>&lt;p>&lt;code>cli-services&lt;/code> 版本為 &lt;code>@vue/cli-service&amp;quot;: &amp;quot;~5.0.0&lt;/code>，如果不是也可以試試看。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># default 8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run serve -- --port &lt;span class="m">8000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="docker">Docker
&lt;/h2>&lt;h3 id="redis">Redis
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--restart always \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-p 6379:6379 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--name dev-redis \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--network dev-network redis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Q: 為什麼有 dev-network ?&lt;/p>
&lt;p>A: 為了可以讓開發容器可以直接使用 &lt;code>dev-redis&lt;/code> 進行連線 ! 前提是開發容器也要使用 dev-network 建立 !&lt;/p>
&lt;/blockquote>
&lt;h3 id="postgresql">PostgreSQL
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span> &lt;span class="n">always&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">5432&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5432&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="n">POSTGRES_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">postgres&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgdata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="n">postgres&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></content></item><item><title>GIT 小撇步 02 - 教你如何刪除 commit 過的大檔案, 超占空間 !</title><link>/p/git-deleted-commit-big-files/</link><pubDate>Wed, 21 Dec 2022 13:36:01 +0800</pubDate><author>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</author><guid>/p/git-deleted-commit-big-files/</guid><description>因為在準備 CI/CD 要減少每個步驟的耗費的時間，導致要整理 git ..</description><tags><tag>GIT</tag></tags><categories><category>Experience</category></categories><image/><content>&lt;h1 id="前言">前言
&lt;/h1>&lt;p>準備要幫自己手上的專案套上 CI/CD，但是發現過去的資料其實沒有使用 &lt;code>submodule&lt;/code> 的方式去管理 &lt;code>data&lt;/code>。&lt;/p>
&lt;blockquote>
&lt;p>此處的 &lt;code>data&lt;/code> 是一個資料夾，裡面放的是客戶系統的資料。會有 &lt;code>.csv&lt;/code> or &lt;code>.json&lt;/code> 的檔案。&lt;/p>
&lt;/blockquote>
&lt;p>所以導致系統的 &lt;code>儲存庫 (repository)&lt;/code> 異常的大，都是大在過去 commit 過的紀錄。&lt;/p>
&lt;blockquote>
&lt;p>最新的 commit 已經把所謂 &lt;code>data&lt;/code> 的資料夾刪除了，但是 git 其實還會幫你存在 &lt;code>.git&lt;/code> 資料夾&lt;/p>
&lt;/blockquote>
&lt;h1 id="參考文章">參考文章
&lt;/h1>&lt;blockquote>
&lt;p>感謝這邊的文章，雖然我還是卡一陣子，導致這篇文的產生 XD&lt;/p>
&lt;/blockquote>
&lt;h2 id="csdn---彻底删除git中的较大文件包括历史提交记录httpsblogcsdnnethappyrockingarticledetails89313501">&lt;a class="link" href="https://blog.csdn.net/HappyRocking/article/details/89313501" target="_blank" rel="noopener"
>CSDN - 彻底删除git中的较大文件（包括历史提交记录）&lt;/a>
&lt;/h2>&lt;h2 id="高見龍---為你自己學-githttpsgitbooktwchaptersfaqremove-sensitive-data">&lt;a class="link" href="https://gitbook.tw/chapters/faq/remove-sensitive-data" target="_blank" rel="noopener"
>高見龍 - 為你自己學 Git&lt;/a>
&lt;/h2>&lt;h2 id="nils-jonsson---rebasing-tags-in-git-repositorieshttpsblognilsjonssoncompost4421450571rebasing-tags-in-git-repositories">&lt;a class="link" href="https://blog.nilsjonsson.com/post/4421450571/rebasing-tags-in-git-repositories" target="_blank" rel="noopener"
>Nils Jonsson - Rebasing tags in Git repositories&lt;/a>
&lt;/h2>&lt;h1 id="先說結論">先說結論
&lt;/h1>&lt;p>尚未優化前，佔 &lt;code>1.2G&lt;/code>&lt;/p>
&lt;p>優化後，佔 &lt;code>121MiB&lt;/code>&lt;/p>
&lt;h1 id="步驟">步驟
&lt;/h1>&lt;h2 id="建議執行前-fork-一份">建議執行前 fork 一份
&lt;/h2>&lt;p>可以在本地端或伺服器端。&lt;/p>
&lt;p>local 端&lt;/p>
&lt;ul>
&lt;li>做錯的話你可以直接 copy 重新&lt;/li>
&lt;li>不用一直 clone&lt;/li>
&lt;/ul>
&lt;p>remote 端&lt;/p>
&lt;ul>
&lt;li>主要是備份 .. 東西不見太恐怖了 !!!&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>請確實做好備份。&lt;/p>
&lt;/blockquote>
&lt;h2 id="重新-clone-一次-重新下載你的程式碼">重新 clone 一次 (重新下載你的程式碼)
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://..... project
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我這邊範例將下載的資料夾取為 &lt;code>project&lt;/code>&lt;/p>
&lt;p>這個動作是為了確保你本地端的程式碼與伺服器端的程式碼相同。&lt;/p>
&lt;blockquote>
&lt;p>因為我們主要要解決儲存庫的　&lt;code>.git&lt;/code>　資料夾。&lt;/p>
&lt;/blockquote>
&lt;h2 id="查看-10-個在-git-裡面最大的檔案">查看 10 個在 Git 裡面最大的檔案
&lt;/h2>&lt;p>先假設 10 個檔案就可以找到我們心目中想要刪掉的檔案名稱，那為什麼我都使用 &lt;code>git rm&lt;/code>　的指令，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git rev-list --all &lt;span class="p">|&lt;/span> xargs -rL1 git ls-tree -r --long &lt;span class="p">|&lt;/span> sort -uk3 &lt;span class="p">|&lt;/span> sort -rnk4 &lt;span class="p">|&lt;/span> head -10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="刪除-git-檔案">刪除 Git 檔案
&lt;/h2>&lt;p>提供你複製，複製後將 &lt;code>檔案名稱&lt;/code> 更改掉，因為他要打上你想要刪除的檔案 or 資料夾。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git filter-branch --force --index-filter &lt;span class="s1">&amp;#39;git rm -rf --cached --ignore-unmatch 檔案名稱&amp;#39;&lt;/span> --prune-empty --tag-name-filter cat -- --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下面是我的範例，提供給你參考。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># example 刪除 data folder, csv and json file.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-branch --force --index-filter &amp;#39;git rm -rf --cached --ignore-unmatch data *.json *.csv&amp;#39; --prune-empty --tag-name-filter cat -- --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>*.json&lt;/code> ：刪除 &lt;code>.json&lt;/code> 檔名的檔案。&lt;/li>
&lt;li>&lt;code>--forec&lt;/code> ：強制刪除&lt;/li>
&lt;li>&lt;code>--index-filter&lt;/code> ：刪除的時候索引重寫。&lt;/li>
&lt;li>&lt;code>--prune-empty&lt;/code>：將空白的 commit 刪除。&lt;/li>
&lt;li>&lt;code>--tag-name-filter tag&lt;/code>: 將會重寫 tag 的索引。&lt;/li>
&lt;/ul>
&lt;p>Git 官方網站：&lt;a class="link" href="https://git-scm.com/docs/git-filter-branch" target="_blank" rel="noopener"
>filter-branch&lt;/a>&lt;/p>
&lt;h1 id="清理-git-資料夾">清理 .git 資料夾
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf .git/refs/original/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git reflog expire --expire&lt;span class="o">=&lt;/span>now --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git gc --prune&lt;span class="o">=&lt;/span>now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git gc --aggressive --prune&lt;span class="o">=&lt;/span>now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin master --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這邊我有先將伺服器端的儲存庫刪除，再重新上傳。&lt;/p>
&lt;blockquote>
&lt;p>注意要備份啊 !!!!!!&lt;/p>
&lt;/blockquote>
&lt;p>另外你也可以透過下面的指令看現在 .git 或 資料夾內部的使用空間。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> project
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看 git 資料夾的使用空間&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">du -sh .git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看全部檔案的使用空間, 但看不到 .git&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">du -sh *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></content></item><item><title>GIT 小撇步 01 - 教你找回尚未 commit 且遺失的檔案</title><link>/p/git-find-out-not-commit-files/</link><pubDate>Wed, 06 Jul 2022 17:59:19 +0800</pubDate><author>admin@chunyen.xyz (陳雋諺, Chun-Yen Chen)</author><guid>/p/git-find-out-not-commit-files/</guid><description>紀錄一下 git add 後 沒有 commit, 找回 add 的檔案.</description><tags><tag>GIT</tag></tags><categories><category>Experience</category></categories><image/><content>&lt;h1 id="前言">前言
&lt;/h1>&lt;p>有一天下午，把某項任務完成後，就下指令 &lt;code>git add&lt;/code>&lt;/p>
&lt;p>然後沒有 &lt;code>git commit&lt;/code> &amp;hellip; (更不用說 &lt;code>git push&lt;/code>)&lt;/p>
&lt;p>總之就在整理前後端版本對應的問題，然後就直接 &lt;code>git checkout -f master&lt;/code> 跳去 master，主要是覆蓋版本，因為主分支已經很久沒有上新版了。&lt;/p>
&lt;p>最後 &amp;hellip; 前端的程式碼被我弄丟了 !&lt;/p>
&lt;h1 id="解法">解法
&lt;/h1>&lt;h2 id="git-fsck">git fsck
&lt;/h2>&lt;p>有看到一個 十年前的文章 (今天是 2022/07/07)&lt;/p>
&lt;p>連結：&lt;a class="link" href="http://blog.hsatac.net/2012/07/git-restore-removed-files/" target="_blank" rel="noopener"
>http://blog.hsatac.net/2012/07/git-restore-removed-files/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">PS C:\code\frontend&amp;gt; git fsck --cache --unreachable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Checking object directories: 100% (256/256), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Checking objects: 100% (2592/2592), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unreachable blob 7fc292a549c604ee4219b2e0db9383b32f3ce152
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unreachable blob 05037508dd7dda94f5fb422a7867471247283403
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unreachable blob 7c83ff9c66bf28827bd0fbb2aa5e377e460829fe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">... 底下還有很多
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>接下來每行 &lt;code>blob 7fc292a549c604ee4219b2e0db9383b32f3ce152&lt;/code> 都是你之前尚未 commit 的檔案。(不是很確定&lt;/p>
&lt;h2 id="git-show">git show
&lt;/h2>&lt;p>接下來就是每一行的看檔案了 &amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git show 7fc292a549c604ee4219b2e0db9383b32f3ce152 &amp;gt; temp.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>接下來你的 &lt;code>C:\code\frontend&lt;/code> (這是我的位置)&lt;/p>
&lt;p>就會看到有一個 &lt;code>temp.txt&lt;/code>&lt;/p>
&lt;p>基本上就是檔案回來囉 !&lt;/p>
&lt;p>希望對您有幫助 !&lt;/p>
&lt;h1 id="完成">完成
&lt;/h1></content></item></channel></rss>